---
title: "UPSERT 개념"
date: 2020-11-08T22:43:22+09:00
#Dev, C++
categories:
- Dev
- DB
tags:
- DB
keywords:
- tech
- developer
- 개발자
- programmer
- programming
- software
- 프로그래머
- coding
- 코딩
- server

#thumbnailImage: //example.com/image.jpg
---

## 정의

간단하게 Update + Insert이며, Update 할 대상 row가 있을 경우 Update, 없을 경우 Insert이다.

<!--more-->

## MySql의 경우 사용 방법

> ```mysql
> INSERT INTO t1 (a,b,c) VALUES (1,2,3)  ON DUPLICATE KEY UPDATE c=c+1;
> ```



## MsSql의 경우 사용 방법

> ```mssql
> CREATE PROCEDURE dbo.InsertOrUpdateEmployee
>        @ID INT,
>        @Name VARCHAR(50),
>        @ItemName VARCHAR(50),  
>        @ItemCatName VARCHAR(50),
>        @ItemQty DECIMAL(15,2)
> AS BEGIN
>     IF NOT EXISTS (SELECT * FROM dbo.Table1 WHERE ID = @ID)
>        INSERT INTO dbo.Table1(ID, Name, ItemName, ItemCatName, ItemQty)
>        VALUES(@ID, @Name, @ItemName, @ItemCatName, @ItemQty)
>     ELSE
>        UPDATE dbo.Table1
>        SET Name = @Name,
>            ItemName = @ItemName,
>            ItemCatName = @ItemCatName,
>            ItemQty = @ItemQty
>        WHERE ID = @ID
> END
> ```



MsSql쪽은 Upsert가 Merge 쪽이랑 연관이 있는듯 한데.. 추후에 좀 찾아볼것..